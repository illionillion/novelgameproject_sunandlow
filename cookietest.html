<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    const test_cookies_set_arr={"A":"a","B":"b"};

    //エスケープしてセット
    document.cookie="test_cokkie="+encodeURIComponent(JSON.stringify(test_cookies_set_arr));
    console.log(document.cookie);

    //エスケープしたものを取り出す
    const test_cookies = document.cookie;
    const test_cookiesArray = test_cookies.split(';');//配列にする
    console.log(test_cookiesArray);

    for(let c of test_cookiesArray){
        // const test_cArray = c.split('=');
        const test_cArray = c.trim().split('=');//空白対策
        console.log(test_cArray[0]);
        console.log(typeof test_cArray[0]);
        console.log(test_cArray[0].length);
        console.log("test_cokkie".length);
        console.log(test_cArray[0] == "test_cokkie");
        if( test_cArray[0] == "test_cokkie"){ // 取り出したいkeyと合致したら
            console.log(JSON.parse(decodeURIComponent(test_cArray[1])));  // 元の文字列 = エスケープ文字を正しく置き換えた文字列
        }
    }

    // if (window.localStorage) {
    //     //localStorageの処理

    //     localStorage.setItem('test_key', JSON.stringify(test_cookies_set_arr));
    //     console.log(JSON.parse(localStorage.getItem('test_key')));

    // }
  </script>
</body>
</html>